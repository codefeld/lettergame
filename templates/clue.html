<p>Give your friend a clue by using letters from their word!</p>
<p>Their word is:</p>
<button onclick="updateClues('{{word[0]}}')" type="button">{{word[0]}}</button>
<button onclick="updateClues('{{word[1]}}')" type="button">{{word[1]}}</button>
<button onclick="updateClues('{{word[2]}}')" type="button">{{word[2]}}</button>
<button onclick="updateClues('{{word[3]}}')" type="button">{{word[3]}}</button>
<button onclick="updateClues('{{word[4]}}')" type="button">{{word[4]}}</button>
<p>You can also use these extra letters or a wild card.</p>
<button onclick="updateClues('I')" type="button">I</button>
<button onclick="updateClues('S')" type="button">S</button>
<button onclick="updateClues('G')" type="button">G</button>
<button onclick="updateClues('N')" type="button">N</button>
<button onclick="updateClues('*')" type="button">*</button>
<p>Your clue will be:</p>
<div id="clue_show"></div>
<p>Your friend will see:</p>
<div id="clue_clue"></div>
<button onclick="backspace()" type="button">Backspace</button>
<form action="/clue" method="post" id="form1">
	<input type="hidden" id="clue" name="clue" value="">
</form>

<button type="submit" form="form1" value="Submit">Enter</button>

<script>

const word = "{{word}}"

window.addEventListener("load", function(){
	const clueElement = document.getElementById("clue")
	clueElement.value = ""
});

function updateClue(letter) {
	const span = document.createElement("span")
	const node = document.createTextNode(letter)
	span.appendChild(node)

	const element = document.getElementById("clue_show")
	element.appendChild(span)
}

function updateClueClue(letter) {

	if (word.indexOf(letter) > -1) {
		letter = "?"
	}

	const span2 = document.createElement("span")
	const node2 = document.createTextNode(letter)
	span2.appendChild(node2)

	const element2 = document.getElementById("clue_clue")
	element2.appendChild(span2)
}

function updateClueForm(letter) {
	if (word.indexOf(letter) > -1) {
		letter = "?"
	}

	const clueElement = document.getElementById("clue")
	clueElement.value = clueElement.value + letter
}

function updateClues(letter) {
	updateClue(letter)
	updateClueClue(letter)
	updateClueForm(letter)
}

function backspace() {
	const clue = document.getElementById("clue_show")
	
	if (clue.lastChild != null) {
		clue.lastChild.remove()
	}

	const clue2 = document.getElementById("clue_clue")
	
	if (clue2.lastChild != null) {
		clue2.lastChild.remove()
	}

	const clue3 = document.getElementById("clue")
	
	if (clue3.value != "") {
		clue3.value = clue3.value.substring(0, clue3.value.length - 1)
	}
}
</script>
